<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../includes/head.ejs') %>
    <link rel="stylesheet" href="/css/nutrition/food.css">
</head>

<body>
    <header class="main-header">
        <%- include('../includes/navigation.ejs') %>
    </header>
    <main>
        <div class="page-title__div">
            <h2 class="page-title">
                <%= pageTitle %>:
            </h2>
        </div>
        <section class="food-selection-creation">
            <div class="select-food-dropdown">
                <label for="select-food" class="select-food-dropdown__title">Comida:</label>
                <form action="/nutrition/redirect-to-view-selected-food" method="POST">
                    <select name="selectedFood" id="select-food-selection">
                        <option value="">-- Elige --</option>
                        <% foodNames.forEach( food=> { %>
                            <option value="<%= food._id %>"
                                <%=selectedFoodInfo?._id?.toString() == food._id ? 'selected' : '' %>
                                >
                                <%= food.name %>
                            </option>
                            <% }); %>
                    </select>
                    <button class="select-food__btn" type="submit">Mostrar</button>
                </form>
            </div>
            <form action="/nutrition/add-food" method="GET">
                <button class="new-food__btn" type="submit">Nueva</button>
            </form>
        </section>
        <form class="food-form" action="/nutrition/add-food" method="POST" id="add-food-form">
            <div class="food-form__control">
                <!-- NAME -->
                <div class="food-form__item">
                    <label for="name" class="food-form__title">Nombre:</label>
                    <input type="text" name="name" id="food-name" required>
                </div>
                <!-- DESCRIPTION -->
                <div class="food-form__item">
                    <label for="description" class="food-form__title">Descripción:</label>
                    <input type="text" name="description" id="description" required>
                </div>
                <!-- CLASSIFICATION -->
                <div class="food-form__item">
                    <label for="classification" class="food-form__title">Clasificación:</label>
                    <select name="classification" id="classification-selection">
                        <option value="">-- Elige --</option>
                        <% foodSelectOptions.classification.forEach( c=> { %>
                            <option value="<%= c %>"><%= c %></option>
                        <% }); %>
                    </select>
                </div>
                <!-- MAIN MACRONUTRIENT -->
                <div class="food-form__item">
                    <label for="mainMacronutrient" class="food-form__title">Macronutriente principal:</label>
                    <select name="mainMacronutrient" id="mainMacronutrient-selection">
                        <option value="">-- Elige --</option>
                        <% foodSelectOptions.macronutrients.forEach( mn=> { %>
                            <option value="<%= mn %>"><%= mn %></option>
                        <% }); %>
                    </select>
                </div>
                <!-- SECONDARY MACRONUTRIENT -->
                <div class="food-form__item">
                    <label for="secondaryMacronutrient" class="food-form__title">Macronutriente
                        secundario:</label>
                    <select name="secondaryMacronutrient" id="secondaryMacronutrient-selection">
                        <option value="">-- Elige --</option>
                        <% foodSelectOptions.macronutrients.forEach( mn=> { %>
                            <option value="<%= mn %>"><%= mn %></option>
                        <% }); %>
                    </select>
                </div>
                <!-- MEAL TYPE -->
                <div class="food-form__item">
                    <label class="food-form__title">Tipo de comida:</label>
                    <input type="checkbox" name="breakfast" id="mealType-selection">
                    <label for="mealType-breakfast" class="food-form__title">Desayuno</label>
                    <input type="checkbox" name="lunch" id="mealType-selection">
                    <label for="mealType-lunch" class="food-form__title">Almuerzo</label>
                    <input type="checkbox" name="dinner" id="mealType-selection">
                    <label for="mealType-dinner" class="food-form__title">Cena</label>
                </div>
                <!-- MICRONUTRIENT DENSITY -->
                <div class="food-form__item">
                    <label for="micronutrientDensity" class="food-form__title">Densidad de
                        micronutrientes:</label>
                    <select name="micronutrientDensity" id="micronutrientDensity-selection">
                        <option value="">-- Elige --</option>
                        <% foodSelectOptions.micronutrientDensity.forEach( md=> { %>
                            <option value="<%= md %>"><%= md %></option>
                        <% }); %>
                    </select>
                </div>
                <!-- SAFE FOR CONDITIONS -->
                <div class="food-form__item-rows">
                    <label for="safeForConditions" class="food-form__title">Seguro para condiciones:</label>
                    <div class="food-form__selects-div" id="safeForConditions-selects">
                        <select name="safeForConditions">
                            <!-- [Loop1] Loop for all the chronic conditions options -->
                            <% chronicConditions?.forEach( cc => { %>
                                <option value="<%= cc._id %>"><%= cc.name %></option>
                            <% }); %>
                            <!-- [END-Loop1] -->
                        </select>
                    </div>
                    <button class="food-form__add-btn" id="btn-add-new-safe-condition">Añadir condición</button>
                </div>
                <!-- NOT RECOMMENDED FOR CONDITIONS -->
                <div class="food-form__item-rows">
                    <label for="notRecommendedForConditions" class="food-form__title">No recomendado para condiciones:</label>
                    <div class="food-form__selects-div" id="notRecommendedForConditions-selects">
                        <select name="notRecommendedForConditions">
                            <!-- [Loop1] Loop for all the chronic conditions options -->
                            <% chronicConditions?.forEach( cc => { %>
                                <option value="<%= cc._id %>"><%= cc.name %></option>
                            <% }); %>
                            <!-- [END-Loop1] -->
                        </select>
                    </div>
                    <button class="food-form__add-btn" id="btn-add-new-not-recommended-condition">Añadir condición</button>
                </div>
                <!-- DIET COMPATIBLE -->
                <div class="food-form__item-rows">
                    <label for="compatibleWithDiets" class="food-form__title">Compatible con dietas:</label>
                    <div class="food-form__selects-div" id="compatibleWithDiets-selects">
                        <select name="compatibleWithDiets">
                        <!-- [Loop1] Loop for all the diets options -->
                        <% diets?.forEach( d => { %>
                            <option value="<%= d._id %>"><%= d.name %></option>
                            <% }); %>
                            <!-- [END-Loop1] -->
                        </select>
                    </div>
                    <button class="food-form__add-btn" id="btn-add-new-diet">Añadir dieta</button>
                </div>
                <!-- RECOMMENDED FOR CYCLE PHASES -->
                <div class="food-form__item-rows">
                    <label for="recommendedForCyclePhases" class="food-form__title">Recomendado para fases:</label>
                    <div class="food-form__selects-div" id="menstrualCyclePhases-selects">
                        <select name="recommendedForCyclePhases">
                        <!-- [Loop1] Loop for all the phases options -->
                            <% menstrualCyclePhases?.forEach( mf=> { %>
                                <option value="<%= mf %>"><%= mf %></option>
                            <% }); %>
                        <!-- [END-Loop1] -->
                        </select>
                    </div>
                    <button class="food-form__add-btn" id="btn-add-new-phase">Añadir fase</button>
                </div>
                <!-- LINK TO IMAGE -->
                <div class="food-form__item">
                    <label for="linkToImage" class="food-form__title">Enlace para imagen:</label>
                    <input type="text" name="linkToImage" id="linkToImage">
                </div>
            </div>
            <div class="food-form-btns__control">
                <button class="add-food-form__btn"  type="submit" id="add-food-form-btn">Añadir</button>
            </div>
        </form>
    </main>
<%- include('../includes/end.ejs') %>